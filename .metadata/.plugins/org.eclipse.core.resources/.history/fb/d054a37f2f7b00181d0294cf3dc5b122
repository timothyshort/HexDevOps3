package basics;

import org.openqa.selenium.By;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.firefox.FirefoxDriver;

public class LoginTestParameterized {
	
	public static void main(String[] args) throws InterruptedException {
		String[] usernames = { "tim@testemail.com", "abadtestemail@mail.com", "jason@testemail.com"};
		String[] passwords = { "password", "yesthisisabadpassword", "jpassword" };
		boolean[] expectations = { true, false, true }; 
		int numberOfCases = usernames.length;
		
		// Itereate through test case
		for (int i=0; i<numberOfCases; i++) {
			// Print the test cases
			String username = usernames[i];
			String password = passwords[i];
			boolean expected = expectations[i];
			System.out.println(username + " " + password);
			
			// Open browser
			System.setProperty("webdriver.gecko.driver", "C:\\HexawareTraining\\Materials\\Software\\Selenium-BDD\\geckodriver.exe");
			WebDriver driver = new FirefoxDriver();
			driver.get("http://sdettraining.com/trguitransactions/AccountManagement.aspx");
			
			// Enter login
			driver.findElement(By.name("ctl00$MainContent$txtUserName")).sendKeys(username);
			driver.findElement(By.id("MainContent_txtPassword")).sendKeys(password);
			driver.findElement(By.name("ctl00$MainContent$btnLogin")).click();
			
			// Validate expected outcome
			String pageText = driver.findElement(By.xpath("html/body")).getText();
			if (expected) {
				System.out.println("Expected: Pass");
				if (pageText.contains("Logged in successfully")) {
					System.out.println("Test passed!");
				}
			}
			
			
			// Close browser
			Thread.sleep(5000);
			driver.quit();
		}
	}

}
